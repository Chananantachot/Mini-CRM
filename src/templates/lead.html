{% extends "layout.html" %}
{% block styles %}
 <style>
.call-panel {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 300px;
  background: #fff;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
  border-radius: 12px;
  padding: 16px;
  font-family: "Segoe UI", sans-serif;
  z-index: 9999;
  display: none; /* toggle to 'block' when call comes in */
}

.call-info {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.caller-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
}

.caller-name {
  font-weight: 600;
  margin: 0;
}

.call-status {
  color: gray;
  font-size: 14px;
  margin: 4px 0 0;
}

.call-actions {
  display: flex;
  justify-content: space-between;
}

.btn {
  flex: 1;
  margin: 0 4px;
  padding: 10px;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  font-size: 14px;
}

.accept {
  background: #28a745;
  color: white;
}

.decline {
  background: #dc3545;
  color: white;
}

div.transbox {
  background-color: rgba(255, 255, 255, 0.4);
  -webkit-backdrop-filter: blur(5px);
  backdrop-filter: blur(5px);
  height: 100%;	
  width: 100%;
  font-weight: bold;
}

.btn {
  flex: 1;
  margin: 0 4px;
  padding: 7px;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  font-size: 12px;
}
</style>
{% endblock %}
{% block content %}

<table id="gridLeads" class="table table-striped table-bordered">
</table>
<div id="pager"></div>
<br />
<table id="gridProdsInterest" class="table table-striped table-bordered">
</table>
<div id="_pager"></div>
{% endblock %}
{% block scripts %}
<!-- REQUIRED: jQuery UI JS for Datepicker functionality -->
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://unpkg.com/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"></script>
<script src="https://unpkg.com/bootstrap-datepicker@1.9.0/dist/locales/bootstrap-datepicker.ar.min.js" charset="UTF-8"></script>
<script src="{{ url_for('static', filename='lead.js') }}"></script>
<script src="{{ url_for('static', filename='product.js') }}"></script>
<script>
  "use strict";
  var calling = false;
  var url = window.location.href;
  const match = url.match(/\/customers\/([0-9a-fA-F-]{36})?/);

  const custId = match ? match[1] : null;
  if (custId)
    loadLeads(custId)
  else
    loadLeads()

 //loadProdsInterest()
</script>
{% endblock %}